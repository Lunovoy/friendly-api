import{r as l,j as t,o as d,C as f}from"./index-BiqYdbNS.js";import{P as g}from"./Page-Dv3Yxcn8.js";import{h,r as j,a as x}from"./useTagStore-CfbAclN9.js";import{u as m}from"./FiltersBlock-Iz-HQHXj.js";import{u as N}from"./useTranslation-z379OQBV.js";import"./Tabs-C9hVvUkL.js";const b="_wrapper_1nfnp_2",u={wrapper:b};const v=p=>{const{events:s,friends:r}=p,[n,i]=l.useState([]),c=l.useCallback(a=>{const e=n.find(o=>new Date(o.date).toISOString()===new Date(a).toISOString()?o:void 0);return(e==null?void 0:e.type)==="event"?"text-red-400 bg-transparent font-bold outline outline-2 outline-red-400":(e==null?void 0:e.type)==="birthday"?"text-purple-600 bg-transparent font-bold outline outline-2 outline-purple-600":""},[n]);return l.useEffect(()=>{s!=null&&s.length&&s.forEach(a=>{i(e=>[...e,{date:new Date(a.start_date).toISOString(),holidayName:a.title,type:"event"}])}),r!=null&&r.length&&r.forEach(a=>{i(e=>{var o;return[...e,{date:new Date((o=a.dob)==null?void 0:o.Time).toISOString(),holidayName:`ДР у ${a.first_name} ${a.last_name}`,type:"birthday"}]})})},[s,r]),t.jsx(h,{locale:j,dayClassName:c,onChange:()=>{},inline:!0,holidays:n})},D=l.memo(p=>{const{t:s}=N("calendar-page"),{className:r}=p,n=m(e=>e.getEvents),i=m(e=>e.events),c=x(e=>e.getFriends),a=x(e=>e.friends);return l.useEffect(()=>{document.title="Календарь"},[]),l.useEffect(()=>{n(),c()},[n,c]),t.jsx(g,{className:d(u.CalendarPage,{},[r]),children:t.jsx(f,{className:d("flex-grow col-span-full flex justify-center items-start",{},[u.wrapper]),children:t.jsxs("div",{className:"flex flex-col gap-10",children:[t.jsx(v,{events:i,friends:a}),t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsx("p",{className:"text-slate-400 font-bold text-[18px]",children:s("Обозначения")}),t.jsxs("div",{className:"flex gap-5 items-center",children:[t.jsx("div",{className:"w-[27px] h-[27px] rounded-[10px] text-purple-600 bg-transparent font-bold outline outline-2 outline-purple-600"}),t.jsx("p",{className:"text-slate-400 italic",children:s("Дни Рождения Ваших контактов")})]}),t.jsxs("div",{className:"flex gap-5 items-center",children:[t.jsx("div",{className:"w-[27px] h-[27px] rounded-[10px] text-red-400 bg-[#ff6803AA] font-bold outline outline-2 outline-red-400"}),t.jsx("p",{className:"text-slate-400 italic",children:s("Ваши события")})]})]})]})})})});export{D as default};
